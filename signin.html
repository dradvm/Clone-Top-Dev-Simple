<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./images/small-logo.jpg" type="image/x-icon">
    <!-- Css -->
    <link rel="stylesheet" href="./lib/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="./lib/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="./lib/Swiper/swiper-bundle.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <!-- Js -->
    <script defer src="./lib/Popper/popper.min.js"></script>
    <script defer src="./lib/bootstrap/js/bootstrap.min.js"></script>
    <script defer src="./lib/fontawesome/js/all.min.js"></script>
    <script defer src="./lib/Swiper/swiper-bundle.min.js"></script>
    <script defer src="./lib/Angularjs/angular.min.js"></script>
    <script defer src="./lib/Angularjs/angular-route.min.js"></script>
    <script defer src="./js/main.js"></script>
    <title>Nhóm 2</title>
</head>

<body>



    <div class="bg-white-50 vh-100 row p-0 gx-0">
        <div class=" d-sm-block d-none img col-sm-6 p-0 h-100 overflow-hidden">
            <img class="w-100 " style="height:115%;" src="./images/new.png" alt="">
        </div>
        <div class=" form col-sm-6 col-12 h-100 text-center  " >

            <form action="#" method="post" class="text-center h-100 d-flex align-items-center justify-content-center">

                <div class="d-flex flex-column text-center justify-content-around  w-100 align-items-center">
                    <div class="w-50 m-3">
                        <img class="w-100 h-100" src="./images/logo.png" alt="">
                    </div>
                    <div>
                        <h1 class="fw-bold text-danger">SIGN IN!</h1>
                    </div>

                    <div class="d-flex flex-column w-75" style="padding:5px;">
                        <label class="text-danger text-start m-2" for="email">Email Address</label>
                        <input class="rounded p-1" type="email" placeholder="Enter Email" name="email" id="email">
                        <span class="d-none warn_email text-danger text-start ">Vui lòng nhập email!</span>
                        <span class=" check_email text-danger text-start d-none">Email không hợp lệ</span>
                    </div>
                    <div class="d-flex flex-column w-75" style="padding:5px;">
                        <label class="text-danger text-start m-2" for="pass">Password</label>
                        <input class="rounded p-1 pass" type="password" placeholder="Enter Password" id="pass">
                        <span class="d-none text-danger text-start warn_pass">Vui lòng nhập mật khẩu!</span>
                    </div>
                    <div class="text-end w-75 m-3">
                        <a class="text-danger" href="#">Forgot password?</a>
                    </div>

                    <div class="text-center">

                        <button class="my-btn fw-bold submit"
                            type="submit">SIGN IN</button>

                    </div>
                    <div class="text-center mt-3">
                        <i class="text-my-primary cursor m-3 fab fa-google" style="font-size: 1.5em;"></i>
                        <i class="text-my-primary cursor m-3 fa-brands fa-facebook-f"
                            style="font-size: 1.5em;"></i></i>
                        <i class="text-my-primary cursor m-3 fa-brands fa-twitter" style="font-size: 1.5em;"></i></i>
                    </div>
                    <div class="mt-3">
                        <p class="text-dark">Don't have an account yet? <a class="text-danger ms-1"
                                href="./signup.html">Sign up!</a></p>


                    </div>
            </form>

        </div>



        </form>
    </div>
    </div>

    <script>
        document.querySelector(".submit").onclick = function (e) {
            e.preventDefault();
            var email = document.querySelector("#email").value;
            if (email) {

            }
            else {
                document.querySelector(".warn_email").classList.remove("d-none");

            }
            var password = document.querySelector(".pass").value;
            if (password) {

            }
            else {
                document.querySelector(".warn_pass").classList.remove("d-none");
            }

            // KIỂM TRA TÀI KHOẢN ĐĂNG NHẬP TRÊN LOCALSTORAGE 

            if (email && password) {
                var infor_signin = {
                    email: email,
                    pass: password
                };
                var infor = JSON.parse(localStorage.getItem('acc'));

                var count = 0;
                
                if (!infor) {
                    alert("Bạn chưa tạo tài khoản!!")
                }
                else {
                    for (var i = 0; i < infor.length; i++) {


                        if ((infor_signin.email == infor[i].email) && (infor_signin.pass == infor[i].password))
                            count++;


                    }
                    if (count == 0) {
                        alert("Vui lòng kiểm tra lại email hoặc mật khẩu");
                    }
                    else {
                        alert("Đăng nhập thành công");
                        localStorage.setItem("user", JSON.stringify({
                            email: email
                        }))
                        window.location.href = "index.html"
                    }

                }
            }


        }

        var d = document.querySelectorAll("input");
        d.forEach(function (item) {
            item.addEventListener("input", function () {

                item.nextElementSibling.classList.add("d-none");

            })



        })

        // KIỂM TRA EMAIL
        document.querySelector("#email").onkeyup = function () {
            document.querySelector(".warn_email").classList.add("d-none");
            var check_email = document.querySelector("#email");
            var check = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            if (!check.test(email.value) && email.value.length > 0) {
                document.querySelector(".check_email").classList.remove("d-none");

            }
            else {
                document.querySelector(".check_email").classList.add("d-none");

            }
        }


    </script>



</body>

</html>